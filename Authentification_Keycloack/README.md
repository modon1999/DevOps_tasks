Задача: развернуть систему для аутентификации и авторизации в приложениях компании, автоматизировать развертывание

Light

1. Развернуть две виртуальные машины с Linux: "keycloak01" и "db01". Можно использовать любые хостинги и способы создания, в том числе и локально на Vagrant.
2. Установить базу данных PostgreSQL на виртуальную машину "db01". Создать базу данных keycloak и пользователя для доступа к ней.
3. Установить standalone сервер keycloak на виртуальную машину "keycloak01".
4. Получить доступ к консоли администратора через веб-интерфейс. Создать тестовый реалм в keycloak с собственными настройками.
5. Автоматизировать действия через Vagrant provisioning.
6. Создать еще один хост - "keycloak02" и запустить keycloak в режиме кластера. Дополнительно: разобраться в механизмах обнаружения хостов keycloak'ом

Normal

1. Разработать ansible-playbook для установки keycloak на хосте. Создать inventory, который будет работать с хостами vagrant, как dev-окружение.
2. Вынести задачки из плейбука и созлать отдельную ansible-роль для установки keycloak. Учесть, что все переменные должны префиксироваться по названию роли: keycloak_
3. Продумать feature-toggle: механизм включения опции по добавлению собственного реалма.
4. Использовать molecule для покрытия роли тестами. Использовать механизм ansible-galaxy и собственный репозиторий для разработки, версионирования и установки роли.
5. Продумать возможность установки keycloak через ansible-роль в режиме кластера.

Hard

1. Подготовить инфраструктуру: кластер kubernetes и отдельный хост для PostgreSQL. Предоставлять файлы и методы для создания кластера в рамках задания не требуется.
2. Используя helm, установить keycloak(standalone) в kubernetes. Обеспечить доступность сервиса извне.
3. Обеспечить высокую доступность кластера, разворачивая keycloak в режиме HA-кластера. Попробывать разные методыобнаружения учасников кластера(JDBC ping, DNS ping, TCP ping и т.д.)
